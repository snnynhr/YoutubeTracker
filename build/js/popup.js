var prefix="https://www.youtube.com/watch";function debug(c){chrome.extension.sendMessage({msg:c})}
function init(){document.getElementById("d1").addEventListener("click",function(a){a.stopPropagation();download(0)});document.getElementById("d2").addEventListener("click",function(a){a.stopPropagation();download(1)});document.getElementById("d3").addEventListener("click",function(a){a.stopPropagation();download(2)});document.getElementById("d4").addEventListener("click",function(a){a.stopPropagation();download(3)});document.getElementById("d5").addEventListener("click",function(a){a.stopPropagation();
download(4)});document.getElementById("options").addEventListener("click",options);for(var c=JSON.parse(localStorage.getItem("bst")),d=JSON.parse(localStorage.getItem("queue")),e=["a","b","c","d","e"],a=0;5>a;a++)if(void 0!==d[4-a]&&0<=d[4-a].search(" ")){var b=d[4-a].search(" ");document.getElementById("d"+(a+1)).classList.remove("hide");var f=parseInt(d[4-a].substring(0,b)),b=parseInt(d[4-a].substring(b+1));999>=c[f][b-1][1].length?document.getElementById(e[a]).innerHTML=c[f][b-1][1]:document.getElementById(e[a]).innerHTML=
c[f][b-1][1].substring(0,999)+"...";document.getElementById(e[a]).href=prefix+c[f][b-1][0]}else document.getElementById("d"+(a+1)).classList.add("hide")}function options(){chrome.tabs.create({url:"options.html"},function(){})}
function download(c){var d=JSON.parse(localStorage.getItem("bst")),e=JSON.parse(localStorage.getItem("queue"));if(void 0!==e[4-c]&&0<=e[4-c].search(" ")){var a=e[4-c].search(" "),b=parseInt(e[4-c].substring(0,a));c=parseInt(e[4-c].substring(a+1));d=d[b][c-1][0].substring(3);for(b=0;b<d.length&&"&"!=d[b];)b+=1;d=d.substring(0,b);debug(d);chrome.extension.sendMessage({msg:"generate",url:d})}}window.addEventListener("DOMContentLoaded",init,!1);
